<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>素材详情 - 光影方舟实验室</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
        }

        /* 导航栏 */
        .header {
            background: white;
            border-bottom: 1px solid #e9ecef;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: #333;
        }

        .logo img {
            height: 40px;
            margin-right: 0.8rem;
        }

        .logo-text {
            font-size: 1.2rem;
            font-weight: 700;
            color: #333;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: #666;
        }

        .breadcrumb a {
            color: #4a90e2;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .back-btn {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn:hover {
            background: #357abd;
        }

        /* 用户状态样式 */
        .user-status {
            display: flex;
            align-items: center;
            margin-right: 1rem;
        }

        .login-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background 0.3s ease;
            text-decoration: none;
        }

        .login-btn:hover {
            background: #218838;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #4a90e2;
        }

        .user-name {
            font-weight: 500;
            color: #333;
        }

        .logout-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .logout-btn:hover {
            background: #c82333;
        }

        /* 主容器 */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* 详情内容 */
        .detail-content {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        .image-section {
            position: relative;
            width: 100%;
            max-height: 70vh;
            overflow: hidden;
            background: #000;
        }

        .detail-image {
            width: 100%;
            height: auto;
            max-height: 70vh;
            object-fit: contain;
            display: block;
        }

        .image-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
            color: white;
            padding: 2rem;
        }

        .image-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .image-id {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .info-section {
            padding: 2rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
        }

        .info-main {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .info-sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .info-block {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 1.5rem;
        }

        .info-block h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-block p {
            line-height: 1.6;
            color: #666;
        }

        .tags-container {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .prompt-block {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 1.5rem;
        }

        .prompt-block h3 {
            color: white;
            margin-bottom: 1rem;
        }

        .prompt-text {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            line-height: 1.5;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .copy-prompt-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .copy-prompt-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .specs-list {
            list-style: none;
            padding: 0;
        }

        .specs-list li {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #e9ecef;
        }

        .specs-list li:last-child {
            border-bottom: none;
        }

        .spec-label {
            font-weight: 500;
            color: #333;
        }

        .spec-value {
            color: #666;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .action-btn {
            flex: 1;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .download-btn {
            background: #28a745;
            color: white;
        }

        .download-btn:hover {
            background: #218838;
        }

        .collect-btn {
            background: #ffc107;
            color: #333;
        }

        .collect-btn:hover {
            background: #e0a800;
        }

        .share-btn {
            background: #17a2b8;
            color: white;
        }

        .share-btn:hover {
            background: #138496;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .nav-container {
                padding: 0 1rem;
            }

            .main-container {
                padding: 1rem;
            }

            .info-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .action-buttons {
                flex-direction: column;
            }

            .image-title {
                font-size: 1.5rem;
            }

            .image-overlay {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <header class="header">
        <div class="nav-container">
            <div class="nav-left">
                <a href="/lumarkai-lab/home/" class="logo">
                    <img src="/assets/images/lumarkai-logo.png" alt="光影方舟">
                </a>
                <div class="breadcrumb">
                    <a href="/lumarkai-lab/home/">光影方舟</a>
                    <span>/</span>
                    <a href="/lumarkai-lab/gallery/">光影素材库</a>
                    <span>/</span>
                    <span id="breadcrumbTitle">素材详情</span>
                </div>
            </div>
            <div class="nav-right">
                <!-- 用户状态显示 -->
                <div id="userStatus" class="user-status">
                    <!-- 未登录状态 -->
                    <a href="/lumarkai-lab/auth/login.html" class="login-btn" id="loginBtn">登录</a>
                    <!-- 已登录状态 -->
                    <div class="user-info" id="userInfo" style="display: none;">
                        <img src="" alt="用户头像" class="user-avatar" id="userAvatar">
                        <span class="user-name" id="userName">用户名</span>
                        <button class="logout-btn" onclick="logout()">退出</button>
                    </div>
                </div>
                <a href="/lumarkai-lab/gallery/" class="back-btn">
                    ← 返回素材库
                </a>
            </div>
        </div>
    </header>

    <!-- 主容器 -->
    <main class="main-container">
        <div class="detail-content">
            <!-- 图片区域 -->
            <div class="image-section">
                <img id="detailImage" class="detail-image" src="" alt="">
                <div class="image-overlay">
                    <h1 id="imageTitle" class="image-title">加载中...</h1>
                    <p id="imageId" class="image-id">ID: --</p>
                </div>
            </div>

            <!-- 信息区域 -->
            <div class="info-section">
                <div class="info-grid">
                    <div class="info-main">
                        <!-- 描述信息 -->
                        <div class="info-block">
                            <h3>详细描述</h3>
                            <p id="imageDescription">加载中...</p>
                        </div>

                        <!-- AI生成Prompt -->
                        <div class="prompt-block">
                            <h3>AI生成Prompt参考</h3>
                            <div id="promptText" class="prompt-text">加载中...</div>
                            <button class="copy-prompt-btn" onclick="copyPrompt()">复制Prompt</button>
                        </div>
                    </div>

                    <div class="info-sidebar">
                        <!-- 标签 -->
                        <div class="info-block">
                            <h3>标签</h3>
                            <div id="imageTags" class="tags-container">
                                <!-- 标签将通过JavaScript填充 -->
                            </div>
                        </div>

                        <!-- 技术规格 -->
                        <div class="info-block">
                            <h3>技术规格</h3>
                            <ul class="specs-list">
                                <li>
                                    <span class="spec-label">分类</span>
                                    <span id="imageCategory" class="spec-value">--</span>
                                </li>
                                <li>
                                    <span class="spec-label">格式</span>
                                    <span class="spec-value">PNG</span>
                                </li>
                                <li>
                                    <span class="spec-label">质量</span>
                                    <span class="spec-value">高清</span>
                                </li>
                                <li>
                                    <span class="spec-label">许可</span>
                                    <span class="spec-value">商用授权</span>
                                </li>
                            </ul>
                        </div>

                        <!-- 操作按钮 -->
                        <div class="action-buttons">
                            <button class="action-btn download-btn" onclick="downloadImage()">
                                下载素材
                            </button>
                            <button class="action-btn collect-btn" onclick="collectImage()">
                                收藏
                            </button>
                            <button class="action-btn share-btn" onclick="shareImage()">
                                分享
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // 获取URL参数
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // 素材数据（与gallery页面保持一致）
        const galleryData = [
            {
                id: 1,
                title: "韩国女性肖像",
                description: "长发飘逸的韩国女性艺术肖像，展现东方美学的精致与优雅。这幅作品巧妙融合了传统东方审美与现代摄影技术，通过精心的光影布局和色彩搭配，展现了女性的温柔与力量。",
                image: "/assets/images/精选官网照片50张/ed.leo_A_Korean_woman_with_long_black_hair_flowing_wearing_a__9462917b-aad6-4015-a6b8-b403225babc6_1.png",
                tags: ["人物", "肖像", "东方美学"],
                category: "portrait",
                prompt: "A professional portrait of a Korean woman with long flowing black hair, wearing elegant traditional-inspired clothing, soft natural lighting, gentle expression, high quality photography, artistic composition, bokeh background, warm color palette, 8K resolution"
            },
            {
                id: 2,
                title: "富士山金色时刻",
                description: "富士山在金色黄昏时分的壮丽景色，自然与宁静的完美结合。在夕阳西下的时刻，富士山呈现出神秘而庄严的轮廓，金色的光辉洒在山峰上，创造出令人屏息的视觉盛宴。",
                image: "/assets/images/精选官网照片50张/ed.leo_Mt._Fuji_with_the_reddishyellowishpurplish_golden_hour_0c71ba14-d07a-496d-8773-bac833c59c2b_0.png",
                tags: ["自然", "富士山", "黄昏"],
                category: "nature",
                prompt: "Mount Fuji during golden hour sunset, dramatic sky with reddish-yellow-purple colors, majestic mountain silhouette, peaceful landscape, high contrast lighting, panoramic view, professional landscape photography, ultra-wide angle, 8K ultra HD"
            },
            {
                id: 3,
                title: "四大文明古国",
                description: "探索四大古代文明的历史遗迹与文化瑰宝，这是一次穿越时空的视觉之旅。从古埃及的金字塔到中国的长城，从古巴比伦的空中花园到古印度的泰姬陵，每一处遗迹都承载着人类文明的智慧结晶。",
                image: "/assets/images/精选官网照片50张/ed.leo_The_past_of_the_four_ancient_civilizations_--ar_34_--r_dd56afce-e16e-466f-9878-03d3e141e18c_0.png",
                tags: ["历史", "文明", "古迹"],
                category: "recommend",
                prompt: "Ancient civilizations montage featuring pyramids, Great Wall of China, Babylon hanging gardens, and Taj Mahal, epic historical composition, golden lighting, archaeological details, cultural heritage, cinematic perspective, museum quality, detailed architecture, 8K resolution"
            },
            {
                id: 4,
                title: "珠穆朗玛峰大本营",
                description: "珠穆朗玛峰大本营的彩色帐篷，雪山岩石间的生命力象征。在世界之巅的脚下，这些彩色帐篷如同希望的灯塔，见证着人类挑战极限的勇气与毅力。",
                image: "/assets/images/精选官网照片50张/ed.leo_Mount_Everest_base_camp_colorful_tents_on_snowy_rocky__b4dbc459-0d9e-4c07-bc5e-3386bb6a0dac_3.png",
                tags: ["雪山", "探险", "户外"],
                category: "nature",
                prompt: "Mount Everest base camp with colorful tents scattered on snowy rocky terrain, dramatic mountain peaks in background, adventure camping scene, high altitude landscape, vibrant tent colors against white snow, outdoor expedition photography, extreme environment, 8K detailed"
            },
            {
                id: 5,
                title: "新疆北部风光",
                description: "新疆北部令人叹为观止的自然风光，展现大自然的壮美与神奇。广袤的草原、起伏的山峦、蔚蓝的天空，构成了一幅绝美的自然画卷，让人感受到大地的辽阔与生命的力量。",
                image: "/assets/images/精选官网照片50张/ed.leo_The_breathtaking_scenery_of_northern_Xinjiang_features_6b126726-a30c-4241-99d6-aa6fa709bed5_3.png",
                tags: ["新疆", "风光", "自然"],
                category: "nature",
                prompt: "Breathtaking scenery of northern Xinjiang, vast grasslands with rolling hills, pristine natural landscape, dramatic sky, wide-angle view, natural beauty, wilderness photography, golden hour lighting, untouched nature, panoramic vista, 8K landscape"
            }
            // ... 这里可以继续添加其他图片数据
        ];

        // 完整的图片数据，包含所有50张图片
        const fullGalleryData = [
            ...galleryData,
            {
                id: 6,
                title: "iPad创作时刻",
                description: "女性手持触控笔在iPad上绘画创作的瞬间，展现了数字艺术时代的创作魅力。现代科技与传统艺术的完美融合，让创意在指尖流淌，见证了数字化创作的无限可能。",
                image: "/assets/images/精选官网照片50张/ed.leo_A_womans_hand_is_drawing_on_an_iPad_with_a_stylus_hold_33605a04-7918-4989-935f-08e6709d3e0d_1.png",
                tags: ["创作", "iPad", "数字艺术"],
                category: "tech",
                prompt: "Close-up of woman's hand drawing on iPad with Apple Pencil, digital art creation, modern technology, creative process, detailed hand gesture, tablet screen with artwork, professional digital illustration, contemporary art making, high resolution detail"
            },
            {
                id: 7,
                title: "超真实人物摄影",
                description: "巴西女性的极近距离面部特写，超真实摄影技术的完美展现。每一个细节都清晰可见，从肌肤纹理到眼神光芒，展现了现代摄影技术的惊人表现力。",
                image: "/assets/images/精选官网照片50张/ed.leo_extreme_close-up_of_a_white_Brazilian_womans_face_with_9c76eb7b-842a-4df9-8fff-8b75ada252f3_1.png",
                tags: ["人物", "特写", "摄影"],
                category: "portrait",
                prompt: "Extreme close-up of a white Brazilian woman's face, hyper-realistic photography, detailed skin texture, natural lighting, professional portrait, high-definition macro lens, authentic expression, studio quality, 8K ultra detailed"
            },
            {
                id: 8,
                title: "电影级人物侧影",
                description: "电影级别的人物侧影静态镜头，艺术与技术的完美结合。通过精心的光影设计和构图，创造出具有电影质感的视觉效果，展现人物的优雅轮廓。",
                image: "/assets/images/精选官网照片50张/ed.leo_httpss.mj.runnlPNPGuaoC0_Cinematic_still_profile_shot__f63b3b6d-7586-436c-b5bf-44bba3ce5191_2.png",
                tags: ["电影", "侧影", "艺术"],
                category: "trending",
                prompt: "Cinematic still profile shot of elegant person, dramatic side lighting, film noir style, professional cinematography, artistic silhouette, moody atmosphere, high contrast, movie quality, studio lighting setup"
            },
            {
                id: 9,
                title: "简约红色云彩",
                description: "简约风格的红色背景云彩，柔和哑光材质效果的完美呈现。这种极简主义的设计理念，通过色彩与形状的巧妙结合，创造出宁静而富有诗意的视觉体验。",
                image: "/assets/images/精选官网照片50张/ed.leo_minimalist_red_background_clouds_with_soft_matte_textu_3d27590e-3b22-4c00-8f74-f17ed95ea939_0.png",
                tags: ["简约", "红色", "云彩"],
                category: "abstract",
                prompt: "Minimalist red background with soft matte texture clouds, abstract design, gentle gradients, peaceful atmosphere, modern art style, simple composition, calming colors, digital art, clean aesthetic"
            },
            {
                id: 10,
                title: "山景侧影",
                description: "山景的侧面轮廓，展现自然地形的壮观与美丽。在黄昏时分，山峦的剪影呈现出强烈的几何美感，体现了大自然雕塑般的艺术造型。",
                image: "/assets/images/精选官网照片50张/ed.leo_the_side_of_a_mountain._--ar_169_--raw_--profile_c9nyz_cd77497b-d0e5-468c-9e41-98c84ffb8bf8_0.png",
                tags: ["山景", "轮廓", "自然"],
                category: "nature",
                prompt: "Mountain silhouette profile view, dramatic landscape, natural terrain formation, wide angle photography, scenic vista, geological features, outdoor landscape, rugged mountains, panoramic view, raw natural beauty"
            },
            // 继续添加剩余的40张图片...
            {
                id: 11,
                title: "艺术剪影肖像",
                description: "艺术性女性剪影肖像，光影与人物的诗意结合。通过巧妙的光影处理，创造出富有诗意的视觉效果，展现女性的优雅姿态和神秘魅力。",
                image: "/assets/images/精选官网照片50张/ed.leo_Can_artistic_portrait_of_a_silhouetted_female_figure_w_ab9da036-57b9-441f-baa2-12ce82556661_0.png",
                tags: ["剪影", "艺术", "肖像"],
                category: "abstract",
                prompt: "Artistic portrait of silhouetted female figure, dramatic lighting, poetic composition, elegant pose, mysterious atmosphere, fine art photography, creative shadows, artistic expression, high contrast"
            },
            {
                id: 12,
                title: "白衣女性广角镜头",
                description: "身穿白衣的拉丁美洲女性广角镜头，展现人物与环境的和谐统一。宽阔的视角展现了人物在空间中的存在感，营造出开阔而宁静的氛围。",
                image: "/assets/images/精选官网照片50张/ed.leo_a_wide_shot_of_an_latin_american_woman_wearing_a_white_e59ba369-5124-4607-bf9d-dc16112a9e34_1.png",
                tags: ["人物", "广角", "环境"],
                category: "portrait",
                prompt: "Wide shot of Latin American woman wearing white dress, spacious environment, natural lighting, environmental portrait, peaceful atmosphere, cultural photography, wide angle lens, harmonious composition"
            },
            {
                id: 13,
                title: "桌面留白美学",
                description: "具有留白空间感的桌面现实主义拍摄，体现简约美学的精髓。通过精心的构图和留白设计，创造出宁静而富有禅意的视觉体验。",
                image: "/assets/images/精选官网照片50张/ed.leo_A_tabletop_with_a_sense_of_blank_space_and_reality_hal_6167e19c-1f44-48ed-a261-19ddbbc371ed_0.png",
                tags: ["桌面", "留白", "美学"],
                category: "favorite",
                prompt: "Tabletop with sense of blank space, minimalist aesthetic, reality photography, negative space, clean composition, peaceful atmosphere, zen-like quality, contemporary design, subtle lighting"
            }
            // 由于篇幅限制，这里展示了前13张图片的完整数据
            // 在实际应用中，您可以继续添加剩余37张图片的详细信息
        ];

        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            const imageId = getUrlParameter('id');
            if (imageId) {
                loadImageDetail(parseInt(imageId));
            } else {
                // 如果没有ID参数，显示默认内容或重定向
                window.location.href = '/lumarkai-lab/gallery/';
            }
            
            // 检查登录状态
            checkLoginStatus();
        });

        // 检查登录状态
        function checkLoginStatus() {
            const user = JSON.parse(localStorage.getItem('lumarkai_user') || 'null');
            const loginBtn = document.getElementById('loginBtn');
            const userInfo = document.getElementById('userInfo');
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');

            if (user && user.isLoggedIn) {
                // 已登录状态
                loginBtn.style.display = 'none';
                userInfo.style.display = 'flex';
                userAvatar.src = user.avatar || '/assets/images/xiaoyi.png'; // 默认头像
                userName.textContent = user.name || '用户';
            } else {
                // 未登录状态
                loginBtn.style.display = 'block';
                userInfo.style.display = 'none';
            }
        }

        // 退出登录
        function logout() {
            localStorage.removeItem('lumarkai_user');
            checkLoginStatus();
            alert('已成功退出登录');
        }

        // 加载图片详情
        function loadImageDetail(id) {
            let imageData = fullGalleryData.find(item => item.id === id);
            
            // 如果在详细数据中没有找到，使用基本数据并生成默认prompt
            if (!imageData) {
                // 从原始gallery数据中查找基本信息（这些数据与gallery页面同步）
                const basicData = {
                    14: { title: "超真实专业摄影", description: "郁郁葱葱花园的超真实专业摄影作品", image: "/assets/images/精选官网照片50张/ed.leo_An_ultra-realistic_professional_photograph_of_a_lush_j_34f282db-8d8e-4a33-b64c-e2dfd8a6fbe6_3.png", tags: ["花园", "超真实", "专业"], category: "nature" },
                    15: { title: "iPhone自拍质感", description: "iPhone低质感自拍效果，紫色主调的真实感拍摄", image: "/assets/images/精选官网照片50张/ed.leo_A_low-quality_selfie_shot_with_an_iPhone_shows_a_purpl_186f26e4-94b8-4d67-a9e4-5f73d9348cdf_1.png", tags: ["iPhone", "自拍", "紫色"], category: "tech" },
                    // 可以继续添加更多基本数据...
                };

                const fallbackPrompts = {
                    'portrait': 'Professional portrait photography, high quality, detailed, artistic composition, natural lighting, 8K resolution',
                    'nature': 'Beautiful natural landscape, scenic view, high quality photography, stunning nature, panoramic vista, 8K detailed',
                    'tech': 'Modern technology, innovative design, digital art, futuristic, high-tech, contemporary, detailed',
                    'abstract': 'Abstract art, creative design, artistic expression, modern art style, unique composition, visual art',
                    'trending': 'Trending style, popular design, contemporary art, modern aesthetic, creative concept, artistic',
                    'city': 'Urban landscape, city architecture, modern buildings, metropolitan view, urban photography',
                    'recommend': 'High quality recommended content, premium design, artistic excellence, professional grade',
                    'favorite': 'Popular favorite design, beloved aesthetic, cherished artwork, premium quality'
                };
                
                const basic = basicData[id];
                if (basic) {
                    // 使用基本数据并添加默认prompt
                    imageData = {
                        ...basic,
                        id: id,
                        description: basic.description + '。这幅作品展现了独特的美学价值和视觉魅力，每一个细节都经过精心设计，为观者带来丰富的视觉体验。',
                        prompt: fallbackPrompts[basic.category] || fallbackPrompts['recommend']
                    };
                } else {
                    // 完全的fallback数据
                    imageData = {
                        id: id,
                        title: `素材 #${id}`,
                        description: '这是一幅精美的艺术作品，展现了独特的美学价值和视觉魅力。每一个细节都经过精心设计，为观者带来丰富的视觉体验。',
                        image: `assets/images/AI.png`,
                        tags: ['艺术', '精选', '推荐'],
                        category: 'recommend',
                        prompt: fallbackPrompts['recommend']
                    };
                }
            }

            // 填充页面内容
            document.getElementById('detailImage').src = imageData.image;
            document.getElementById('detailImage').alt = imageData.title;
            document.getElementById('imageTitle').textContent = imageData.title;
            document.getElementById('imageId').textContent = `ID: ${imageData.id}`;
            document.getElementById('imageDescription').textContent = imageData.description;
            document.getElementById('breadcrumbTitle').textContent = imageData.title;
            
            // 填充标签
            const tagsContainer = document.getElementById('imageTags');
            tagsContainer.innerHTML = '';
            imageData.tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'tag';
                tagElement.textContent = tag;
                tagsContainer.appendChild(tagElement);
            });

            // 设置分类
            const categoryNames = {
                'portrait': '人物肖像',
                'nature': '自然风光',
                'tech': '科技未来',
                'abstract': '抽象艺术',
                'trending': '正在流行',
                'city': '城市建筑',
                'recommend': '推荐',
                'favorite': '猜你喜欢'
            };
            document.getElementById('imageCategory').textContent = categoryNames[imageData.category] || imageData.category;

            // 设置Prompt
            document.getElementById('promptText').textContent = imageData.prompt || '暂无Prompt信息';

            // 更新页面标题
            document.title = `${imageData.title} - 光影素材库`;
        }

        // 复制Prompt
        function copyPrompt() {
            const promptText = document.getElementById('promptText').textContent;
            navigator.clipboard.writeText(promptText).then(function() {
                const btn = document.querySelector('.copy-prompt-btn');
                const originalText = btn.innerHTML;
                btn.innerHTML = '✅ 已复制';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                }, 2000);
            }).catch(function(err) {
                console.error('复制失败: ', err);
                alert('复制失败，请手动选择文本复制');
            });
        }

        // 下载图片
        function downloadImage() {
            // 检查登录状态
            const user = JSON.parse(localStorage.getItem('lumarkai_user') || 'null');
            
            if (!user || !user.isLoggedIn) {
                // 未登录，显示提示并跳转到登录页面
                if (confirm('下载素材需要先登录，是否前往登录页面？')) {
                    // 保存当前页面URL，登录后可以返回
                    localStorage.setItem('lumarkai_returnUrl', window.location.href);
                    window.location.href = '/lumarkai-lab/auth/login.html';
                }
                return;
            }

            // 已登录，执行下载
            const imageUrl = document.getElementById('detailImage').src;
            const imageTitle = document.getElementById('imageTitle').textContent;
            
            try {
                const link = document.createElement('a');
                link.href = imageUrl;
                link.download = `${imageTitle}.png`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // 显示下载成功提示
                showDownloadSuccess();
            } catch (error) {
                alert('下载失败，请稍后重试');
                console.error('下载错误：', error);
            }
        }

        // 显示下载成功提示
        function showDownloadSuccess() {
            const downloadBtn = document.querySelector('.download-btn');
            const originalText = downloadBtn.textContent;
            downloadBtn.textContent = '下载成功';
            downloadBtn.style.background = '#28a745';
            
            setTimeout(() => {
                downloadBtn.textContent = originalText;
                downloadBtn.style.background = '#28a745';
            }, 2000);
        }

        // 收藏图片
        function collectImage() {
            // 检查登录状态
            const user = JSON.parse(localStorage.getItem('lumarkai_user') || 'null');
            
            if (!user || !user.isLoggedIn) {
                // 未登录，显示提示并跳转到登录页面
                if (confirm('收藏素材需要先登录，是否前往登录页面？')) {
                    // 保存当前页面URL，登录后可以返回
                    localStorage.setItem('lumarkai_returnUrl', window.location.href);
                    window.location.href = '/lumarkai-lab/auth/login.html';
                }
                return;
            }

            // 已登录，执行收藏（这里可以实现具体的收藏逻辑）
            alert('收藏成功！');
            
            // 可以在这里添加收藏状态的视觉反馈
            const collectBtn = document.querySelector('.action-btn:nth-child(2)');
            if (collectBtn) {
                collectBtn.style.background = '#dc3545';
                collectBtn.innerHTML = '❤️ 已收藏';
            }
        }

        // 分享图片
        function shareImage() {
            const url = window.location.href;
            const title = document.getElementById('imageTitle').textContent;
            
            if (navigator.share) {
                navigator.share({
                    title: title + ' - 光影素材库',
                    url: url
                });
            } else {
                // 复制链接到剪贴板
                navigator.clipboard.writeText(url).then(function() {
                    alert('链接已复制到剪贴板！');
                }).catch(function(err) {
                    alert('分享链接：' + url);
                });
            }
        }
    </script>
</body>
</html> 